<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Profile - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Basic-icons.css">
    <link rel="stylesheet" href="assets/css/Toggle-Switches.css">
    <link rel="stylesheet" href="assets/css/xToggle.css">
</head>

<body id="page-top">
    <div id="wrapper">
        <nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0">
            <div class="container-fluid d-flex flex-column p-0"><a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="#">
                    <div class="sidebar-brand-icon rotate-n-15"><i class="fas fa-laugh-wink"></i></div>
                    <div class="sidebar-brand-text mx-3"><span>Brand</span></div>
                </a>
                <hr class="sidebar-divider my-0">
                <ul class="navbar-nav text-light" id="accordionSidebar">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"><a class="nav-link" href="creditors.html"><i class="fas fa-table"></i><span>Creditors</span></a><a class="nav-link active" href="loans.html"><i class="fas fa-dollar-sign"></i><span>Loans</span></a></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"><a class="nav-link" href="register.html"><i class="fas fa-user-circle"></i><span>Register</span></a></li>
                </ul>
                <div class="text-center d-none d-md-inline"><button class="btn rounded-circle border-0" id="sidebarToggle" type="button"></button></div>
            </div>
        </nav>
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content">
                <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top">
                    <div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle me-3" id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
                        <form class="d-none d-sm-inline-block me-auto ms-md-3 my-2 my-md-0 mw-100 navbar-search">
                            <div class="input-group"><input class="bg-light form-control border-0 small" type="text" placeholder="Search for ..."><button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button></div>
                        </form>
                        <ul class="navbar-nav flex-nowrap ms-auto">
                            <li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><i class="fas fa-search"></i></a>
                                <div class="dropdown-menu dropdown-menu-end p-3 animated--grow-in" aria-labelledby="searchDropdown">
                                    <form class="me-auto navbar-search w-100">
                                        <div class="input-group"><input class="bg-light form-control border-0 small" type="text" placeholder="Search for ...">
                                            <div class="input-group-append"><button class="btn btn-primary py-0" type="button"><i class="fas fa-search"></i></button></div>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="badge bg-danger badge-counter">3+</span><i class="fas fa-bell fa-fw"></i></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
                                        <h6 class="dropdown-header">alerts center</h6><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-primary icon-circle"><i class="fas fa-file-alt text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 12, 2019</span>
                                                <p>A new monthly report is ready to download!</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-success icon-circle"><i class="fas fa-donate text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 7, 2019</span>
                                                <p>$290.29 has been deposited into your account!</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-warning icon-circle"><i class="fas fa-exclamation-triangle text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 2, 2019</span>
                                                <p>Spending Alert: We've noticed unusually high spending for your account.</p>
                                            </div>
                                        </a><a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="badge bg-danger badge-counter">7</span><i class="fas fa-envelope fa-fw"></i></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
                                        <h6 class="dropdown-header">alerts center</h6><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle" src="assets/img/avatars/avatar4.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Hi there! I am wondering if you can help me with a problem I've been having.</span></div>
                                                <p class="small text-gray-500 mb-0">Emily Fowler - 58m</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle" src="assets/img/avatars/avatar2.jpeg">
                                                <div class="status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>I have the photos that you ordered last month!</span></div>
                                                <p class="small text-gray-500 mb-0">Jae Chun - 1d</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle" src="assets/img/avatars/avatar3.jpeg">
                                                <div class="bg-warning status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Last month's report looks great, I am very happy with the progress so far, keep up the good work!</span></div>
                                                <p class="small text-gray-500 mb-0">Morgan Alvarez - 2d</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle" src="assets/img/avatars/avatar5.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Am I a good boy? The reason I ask is because someone told me that people say this to all dogs, even if they aren't good...</span></div>
                                                <p class="small text-gray-500 mb-0">Chicken the Dog · 2w</p>
                                            </div>
                                        </a><a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
                                    </div>
                                </div>
                                <div class="shadow dropdown-list dropdown-menu dropdown-menu-end" aria-labelledby="alertsDropdown"></div>
                            </li>
                            <div class="d-none d-sm-block topbar-divider"></div>
                            <li class="nav-item dropdown no-arrow">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#"><span class="d-none d-lg-inline me-2 text-gray-600 small">Valerie Luna</span><img class="border rounded-circle img-profile" src="assets/img/avatars/avatar1.jpeg"></a>
                                    <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a class="dropdown-item" href="#"><i class="fas fa-user fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Profile</a><a class="dropdown-item" href="#"><i class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Settings</a><a class="dropdown-item" href="#"><i class="fas fa-list fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Activity log</a>
                                        <div class="dropdown-divider"></div><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
                <div class="container-fluid">
                    <h3 class="text-dark mb-4">Profile</h3>
                    <div class="row mb-3">
                        <div class="col-lg-8 col-xl-12">
                            <div class="row mb-3 d-none">
                                <div class="col">
                                    <div class="card text-white bg-primary shadow">
                                        <div class="card-body">
                                            <div class="row mb-2">
                                                <div class="col">
                                                    <p class="m-0">Peformance</p>
                                                    <p class="m-0"><strong>65.2%</strong></p>
                                                </div>
                                                <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                                            </div>
                                            <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since last month</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card text-white bg-success shadow">
                                        <div class="card-body">
                                            <div class="row mb-2">
                                                <div class="col">
                                                    <p class="m-0">Peformance</p>
                                                    <p class="m-0"><strong>65.2%</strong></p>
                                                </div>
                                                <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                                            </div>
                                            <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since last month</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-12" style="padding-bottom: 0px;margin-bottom: -18px;">
                                    <div class="card shadow mb-3">
                                        <div class="card-header py-3">
                                            <p class="text-primary m-0 fw-bold">Creditor 1</p>
                                        </div>
                                        <div class="card-body" style="padding-bottom: 0px;margin-bottom: -26px;">
                                            <form>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="mb-3"><label class="form-label" for="username"><strong>Creditor ID</strong><br></label><input class="form-control" type="text" id="username" placeholder="creditor#0000" name="username" disabled=""></div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="mb-3"><label class="form-label" for="email"><strong>Email Address</strong></label><input class="form-control" type="email" id="email" placeholder="user@example.com" name="email" disabled=""></div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="mb-3"><label class="form-label" for="first_name"><strong>First Name</strong></label><input class="form-control" type="text" id="first_name" placeholder="John" name="first_name" disabled=""></div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="mb-3"><label class="form-label" for="last_name"><strong>Last Name</strong></label><input class="form-control" type="text" id="last_name" placeholder="Doe" name="last_name" disabled=""></div>
                                                    </div>
                                                </div>
                                                <div class="mb-3"></div>
                                            </form>
                                        </div>
                                        <div class="card-body" style="padding-top: 0px;"></div>
                                    </div>
                                    <div class="card shadow"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container" style="padding-bottom: 0px;margin-bottom: 0px;">
                    <div class="row">
                        <div class="col-md-3 col-xl-3">
                            <div class="card shadow d-xl-flex justify-content-xl-center border-start-primary py-2" style="padding-bottom: 0px;height: 111.594px;padding-top: 0px;margin-bottom: -1px;"><a class="card-link text-decoration-none" href="#" data-bs-target="#modal-1" data-bs-toggle="modal">
    <div class="card-body">
        <div class="row align-items-center no-gutters">
            <div class="col me-2">
                <div class="text-uppercase text-primary fw-bold text-xs mb-1"><span>loans issued</span></div>
                <div class="text-dark fw-bold h5 mb-0"><span>2</span></div>
            </div>
            <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
        </div>
    </div>
</a></div>
                        </div>
                        <div class="col-md-3">
                            <div class="card shadow border-start-success py-2" style="height: 111.594px;">
                                <div class="card-body" style="display: flex;">
                                    <div class="row align-items-center no-gutters" style="text-align: justify;">
                                        <div class="col me-2">
                                            <div class="text-uppercase text-success fw-bold text-xs mb-1"><span>TOTAL INVESTMENTS</span></div>
                                            <div class="text-dark fw-bold h5 mb-0"><span>$215,000</span></div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card shadow border-start-info py-2">
                                <div class="card-body">
                                    <div class="row align-items-center no-gutters">
                                        <div class="col me-2">
                                            <div class="text-uppercase text-info fw-bold text-xs mb-1"><span>TOTAL AMOUNT INVOLVED IN LOANS</span></div>
                                            <div class="row g-0 align-items-center">
                                                <div class="col-auto">
                                                    <div class="text-dark fw-bold h5 mb-0 me-3"><span>50%</span></div>
                                                </div>
                                                <div class="col">
                                                    <div class="progress progress-sm">
                                                        <div class="progress-bar bg-info" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: 50%;"><span class="visually-hidden">50%</span></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card shadow border-start-success py-2" style="height: 111.594px;">
                                <div class="card-body" style="display: flex;">
                                    <div class="row align-items-center no-gutters" style="text-align: justify;">
                                        <div class="col me-2">
                                            <div class="text-uppercase text-success fw-bold text-xs mb-1"><span>earnings</span></div>
                                            <div class="text-dark fw-bold h5 mb-0"><span>$215,000</span></div>
                                        </div>
                                        <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" role="dialog" tabindex="-1" id="modal-2">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title"></h4><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <section class="position-relative py-4 py-xl-5" style="margin-bottom: -47px;padding-top: 0px;margin-top: -19px;">
                                    <h2 class="text-center mb-4"><strong><em>Add New Loan</em></strong></h2>
                                    <div class="container position-relative">
                                        <div class="row d-flex justify-content-center">
                                            <div class="col">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Name</p>
                                            </div>
                                            <div class="col"><input type="number" name="debtorName"></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Principal Amount</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" name="principalAmount"></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Date Released</p>
                                            </div>
                                            <div class="col-md-6"><input type="date" style="padding-right: 0px;width: 194px;"></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Interest Per Month</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" value="10" min="10" max="10" name="interestPerMonth" ></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Loan Term (Months)</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" min="1" max="12" name="monthTerm" value="1"></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Total Interest</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" name="principalAmount" disabled=""></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Total Balance</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" name="principalAmount" disabled=""></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Daily Amortization</p>
                                            </div>
                                            <div class="col-md-6"><input type="number" name="principalAmount" disabled=""></div>
                                        </div>
                                    </div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <p style="margin-bottom: 21px;padding-right: 0px;padding-bottom: 0px;">Frequency of Collection</p>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="dropdown"><button class="btn btn-secondary dropdown-toggle text-start" aria-expanded="false" data-bs-toggle="dropdown" type="button" style="background: rgb(255,255,255);color: rgb(0,0,0);padding-right: 88px;margin-right: -2px;">Dropdown </button>
                                                    <div class="dropdown-menu"><a class="dropdown-item" href="#">First Item</a><a class="dropdown-item" href="#">Second Item</a><a class="dropdown-item" href="#">Third Item</a></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                            <div class="modal-footer"><button class="btn btn-light" type="button" data-bs-dismiss="modal">Close</button><button class="btn btn-primary" type="button">Save</button></div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" role="dialog" tabindex="-1" id="modal-1">
                    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable" role="document">
                        <div class="modal-content">
                            <div class="modal-header border rounded-0">
                                <h4 class="modal-title"></h4><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="card shadow" style="padding-top: 0px;">
                                    <div class="card-header py-3">
                                        <div class="text-md-end dataTables_filter" id="dataTable_filter" style="margin-bottom: -30px;">
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col-md-6 col-xl-4" style="padding-right: 232px;margin-right: -129px;">
                                                        <p class="text-start text-primary m-0 fw-bold" style="padding-right: 196px;width: 244.656px;margin-right: -121px;">Loans</p>
                                                    </div>
                                                    <div class="col-xl-1" style="margin-bottom: -29px;padding-bottom: 21px;">
                                                        <div class="border rounded-pill border-0 d-flex xToggle" style="width: 32px;height: 18px;cursor: pointer;" data-checked="true" onclick="onToggle(this)"><i class="fas fa-circle" style="/*float: left;*/height: 100%;padding-top: 1px;padding-left: 2px;padding-right: 2px;color: white;padding-bottom: 5px;"></i></div>
                                                    </div>
                                                    <div class="col-md-6" style="padding-left: 239px;margin-left: 202px;"><input type="search" class="form-control form-control-sm" aria-controls="dataTable" placeholder="Search" style="width: 195.5px;padding-left: 8px;transform-origin: right;display: inline-grid;"></div>
                                                </div>
                                            </div>
                                            <div class="container" style="margin-right: 16px;padding-right: 3px;">
                                                <div class="row">
                                                    <div class="col-md-6" style="padding-right: 271px;margin-right: -271px;">
                                                        <div class="table-responsive">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="text-start" style="width: 10px;font-size: 13px;"><span style="font-weight: normal !important;">Principal Amount</span></th>
                                                                        <th class="text-center" style="font-size: 13px;width: -8px;"><input class="d-inline-flex" type="number" style="width: 98px;display: inline-block;" name="principalAmount"></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Date Released</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input type="date" style="width: 98px;height: 25.5px;display: inline-block;"></td>
                                                                    </tr>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Interest Per Month</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;">
                                                                            <div class="dropdown show"><button class="btn btn-primary dropdown-toggle" aria-expanded="true" data-bs-toggle="dropdown" type="button" style="width: 98px;height: 25.5px;font-size: 12px;text-align: center;padding-top: 3px;background: rgb(255,255,255);color: rgb(0,0,0);">10
                                                                                 </button>
                                                                                <div class="dropdown-menu show" data-bs-popper="none"><a class="dropdown-item" href="#">10</a><a class="dropdown-item" href="#">20</a></div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Loan Term (monthly)</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input class="d-inline-flex" type="number" style="width: 98px;display: inline-block;" name="loanTerm" min="1" max="12" value="1"></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Total Interest</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input class="d-inline-flex" type="number" style="width: 98px;display: inline-block;" disabled=""></td>
                                                                    </tr>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Total Balance</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input class="d-inline-flex" type="number" style="width: 98px;display: inline-block;" disabled=""></td>
                                                                    </tr>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Daily Amortization</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input class="d-inline-flex" type="number" style="width: 98px;display: inline-block;" disabled=""></td>
                                                                    </tr>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Frequency of Collection</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;">
                                                                            <div class="dropdown show"><button class="btn btn-primary dropdown-toggle" aria-expanded="true" data-bs-toggle="dropdown" type="button" style="width: 98px;height: 25.5px;font-size: 12px;text-align: center;padding-top: 3px;background: rgb(255,255,255);color: rgb(0,0,0);">Daily </button>
                                                                                <div class="dropdown-menu show" data-bs-popper="none"><a class="dropdown-item" href="#">Daily</a><a class="dropdown-item" href="#">Weekly</a><a class="dropdown-item" href="#">Monthly</a></div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="text-start">
                                                                        <td class="text-start" style="width: 10px;font-size: 13px;">Payment Start Date</td>
                                                                        <td class="text-center" style="font-size: 13px;width: -8px;"><input type="date" style="width: 98px;height: 25.5px;display: inline-block;"></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div><button class="btn btn-primary" type="button" data-bs-target="#modal-2" data-bs-toggle="modal">Generate Table</button>
                                                    </div>
                                                    <div class="col-md-6 col-xl-9 text-start" style="margin-top: -8px;margin-left: 6px;border-left: 3px solid var(--bs-blue);width: 784px;">
                                                        <div class="row">
                                                            <div class="col">
                                                                <p style="padding-bottom: 0px;margin-bottom: 4px;padding-top: 9px;"><strong><span style="color: rgb(78, 115, 223);">Debtor 1</span></strong></p>
                                                            </div>
                                                        </div>
                                                        <div class="table-responsive table mt-2" id="dataTable-1" role="grid" aria-describedby="dataTable_info">
                                                            <table class="table my-0" id="dataTable">
                                                                <thead>
                                                                    <tr>
                                                                        <th>No</th>
                                                                        <th>Remittances</th>
                                                                        <th>Amortization</th>
                                                                        <th>Principal</th>
                                                                        <th>Interest</th>
                                                                        <th>Amort Paid? (Y/N)</th>
                                                                        <th>Balance</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>0</td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td><br></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td><br></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td><br></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td><br></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                        <td><br></td>
                                                                        <td></td>
                                                                        <td></td>
                                                                    </tr>
                                                                </tbody>
                                                                <tfoot>
                                                                    <tr></tr>
                                                                </tfoot>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div><label class="form-label"></label>
                                        </div>
                                    </div>
                                    <div class="card-body" style="padding-top: 0px;">
                                        <div class="row">
                                            <div class="col-md-6 align-self-center">
                                                <p id="dataTable_info" class="dataTables_info" role="status" aria-live="polite">Showing 1 to 10 of 27</p>
                                            </div>
                                            <div class="col-md-6">
                                                <nav class="d-lg-flex justify-content-lg-end dataTables_paginate paging_simple_numbers">
                                                    <ul class="pagination">
                                                        <li class="page-item disabled"><a class="page-link" aria-label="Previous" href="#"><span aria-hidden="true">«</span></a></li>
                                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                                        <li class="page-item"><a class="page-link" aria-label="Next" href="#"><span aria-hidden="true">»</span></a></li>
                                                    </ul>
                                                </nav>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer"></div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"><span>Copyright © Brand 2025</span></div>
                </div>
            </footer>
        </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/xToggle.js"></script>
    <script src="loan-calculator.js"></script>
    <!-- Add this script tag before the closing </body> tag -->
    <script src="path/to/your/client-api-script.js"></script>
    <script>
async function apiRequest(url, method = 'GET', data = null) {
    try {
        const options = {
            method,
            headers: {
                'Content-Type': 'application/json',
            },
        };
        
        if (data) {
            options.body = JSON.stringify(data);
        }
        
        const response = await fetch(url, options);
        const result = await response.json();
        
        if (!response.ok) {
            throw new Error(result.error || 'API request failed');
        }
        
        return result;
    } catch (error) {
        console.error('API Error:', error);
        throw error;
    }
}

// Function to check if all required fields are filled for calculation
function checkCalculationFieldsFilled() {
    const modal = document.querySelector('#modal-1');
    if (!modal) return false;
    
    // Get all required field values for calculation
    const principalAmount = parseFloat(modal.querySelector('input[name="principalAmount"]').value) || 0;
    const loanTermInput = modal.querySelector('input[name="loanTerm"]') || modal.querySelector('input[min="1"][max="12"]');
    const loanTermMonths = parseInt(loanTermInput ? loanTermInput.value : 0) || 0;
    
    // Get frequency from dropdown
    const dropdownButton = modal.querySelector('.dropdown-toggle');
    const frequency = dropdownButton ? dropdownButton.textContent.toLowerCase().trim() : 'dropdown';
    
    // Check if calculation fields are filled (don't need dates for basic calculation)
    const calculationFieldsFilled = principalAmount > 0 && 
                                   loanTermMonths > 0 && 
                                   !frequency.includes('dropdown');
    
    console.log('Calculation field check:', {
        principalAmount,
        loanTermMonths,
        frequency,
        calculationFieldsFilled
    });
    
    return calculationFieldsFilled;
}

// Function to check if all required fields are filled for table generation
function checkAllFieldsFilled() {
    const modal = document.querySelector('#modal-1');
    if (!modal) return false;
    
    // Get all required field values
    const principalAmount = parseFloat(modal.querySelector('input[name="principalAmount"]').value) || 0;
    const dateReleased = modal.querySelectorAll('input[type="date"]')[0].value;
    const loanTermInput = modal.querySelector('input[name="loanTerm"]') || modal.querySelector('input[min="1"][max="12"]');
    const loanTermMonths = parseInt(loanTermInput ? loanTermInput.value : 0) || 0;
    const paymentStartDate = modal.querySelectorAll('input[type="date"]')[1].value;
    
    // Get frequency from dropdown
    const dropdownButton = modal.querySelector('.dropdown-toggle');
    const frequency = dropdownButton ? dropdownButton.textContent.toLowerCase().trim() : 'dropdown';
    
    // Check if all fields are filled
    const allFilled = principalAmount > 0 && 
                     dateReleased && 
                     loanTermMonths > 0 && 
                     paymentStartDate && 
                     !frequency.includes('dropdown');
    
    return allFilled;
}

// Function to get frequency multiplier (how many payments per month)
function getFrequencyMultiplier(frequency) {
    switch (frequency.toLowerCase()) {
        case 'daily':
            return 30; // 30 payments per month
        case 'weekly':
            return 4; // 4 payments per month (approximately)
        case 'monthly':
            return 1; // 1 payment per month
        default:
            return 30; // Default to daily
    }
}

// Function to get days between payments
function getDaysBetweenPayments(frequency) {
    switch (frequency.toLowerCase()) {
        case 'daily':
            return 1;
        case 'weekly':
            return 7;
        case 'monthly':
            return 30;
        default:
            return 1; // Default to daily
    }
}

// Auto-calculate loan values when basic fields are filled
async function autoCalculateLoanValues() {
    // Only calculate if calculation fields are filled
    if (!checkCalculationFieldsFilled()) {
        console.log('Not all calculation fields filled, skipping auto-calculation');
        // Clear the calculated fields if not all required fields are filled
        clearCalculatedFields();
        return;
    }
    
    try {
        // Get input values
        const modal = document.querySelector('#modal-1');
        const principalAmount = parseFloat(modal.querySelector('input[name="principalAmount"]').value) || 0;
        const loanTermInput = modal.querySelector('input[name="loanTerm"]') || modal.querySelector('input[min="1"][max="12"]');
        const loanTermMonths = parseInt(loanTermInput.value) || 1;

        const interestDropdown = modal.querySelector('.dropdown-toggle');
        let interestRate = 10; // Default to 10%
        if (interestDropdown) {
            const selectedInterest = interestDropdown.textContent.trim();
            if (selectedInterest.includes('20')) {
                interestRate = 20;
            } else if (selectedInterest.includes('10')) {
                interestRate = 10;
            }
        }
        
        // Get frequency for amortization calculation
        const dropdownButtons = modal.querySelectorAll('.dropdown-toggle');
        let frequency = 'daily';
        
        // Find the frequency dropdown (second dropdown)
        if (dropdownButtons.length > 1) {
            const frequencyDropdown = dropdownButtons[1];
            const selectedText = frequencyDropdown.textContent.toLowerCase().trim();
            if (selectedText.includes('weekly')) frequency = 'weekly';
            else if (selectedText.includes('monthly')) frequency = 'monthly';
            else if (selectedText.includes('daily')) frequency = 'daily';
        }
        
        // Calculate loan values
        const monthlyInterestRate = interestRate / 100;
        const totalInterest = principalAmount * monthlyInterestRate * loanTermMonths;
        const totalBalance = principalAmount + totalInterest;
        
        // Calculate amortization based on frequency
        const frequencyMultiplier = getFrequencyMultiplier(frequency);
        const totalPayments = loanTermMonths * frequencyMultiplier;
        const amortizationAmount = totalBalance / totalPayments;
        
        // Update calculated fields in the modal by finding them in the table structure
        const tableRows = modal.querySelectorAll('tbody tr');
        tableRows.forEach(row => {
            const label = row.querySelector('td:first-child').textContent.toLowerCase();
            const input = row.querySelector('input[type="number"][disabled]');
            
            if (input) {
                if (label.includes('total interest')) {
                    input.value = totalInterest.toFixed(2);
                    console.log('Updated Total Interest:', totalInterest.toFixed(2));
                } else if (label.includes('total balance')) {
                    input.value = totalBalance.toFixed(2);
                    console.log('Updated Total Balance:', totalBalance.toFixed(2));
                } else if (label.includes('daily amortization')) {
                    input.value = amortizationAmount.toFixed(2);
                    console.log(`Updated ${frequency.charAt(0).toUpperCase() + frequency.slice(1)} Amortization:`, amortizationAmount.toFixed(2));
                }
            }
        });
        
        console.log('Auto-calculated values:', { 
            totalInterest, 
            totalBalance, 
            amortizationAmount, 
            frequency, 
            totalPayments,
            frequencyMultiplier 
        });
        
        return { totalInterest, totalBalance, amortizationAmount };
        
    } catch (error) {
        console.error('Error auto-calculating loan values:', error);
    }
}

// Clear calculated fields
function clearCalculatedFields() {
    const modal = document.querySelector('#modal-1');
    if (!modal) return;
    
    const tableRows = modal.querySelectorAll('tbody tr');
    tableRows.forEach(row => {
        const label = row.querySelector('td:first-child').textContent.toLowerCase();
        const input = row.querySelector('input[type="number"][disabled]');
        
        if (input && (label.includes('total interest') || label.includes('total balance') || label.includes('daily amortization'))) {
            input.value = '';
        }
    });
}

// Original calculation function for manual trigger
async function calculateLoanValues() {
    return await autoCalculateLoanValues();
}

async function generateAmortizationTable() {
    try {
        const modal = document.querySelector('#modal-1');
        
        // Get input values
        const principalAmount = parseFloat(modal.querySelector('input[name="principalAmount"]').value) || 0;
        const loanTermInput = modal.querySelector('input[name="loanTerm"]') || modal.querySelector('input[min="1"][max="12"]');
        const loanTermMonths = parseInt(loanTermInput.value) || 1;
        const interestRate = 10;
        
        // Get frequency from dropdown (second dropdown)
        const dropdownButtons = modal.querySelectorAll('.dropdown-toggle');
        let frequency = 'daily';
        
        if (dropdownButtons.length > 1) {
            const frequencyDropdown = dropdownButtons[1];
            const selectedText = frequencyDropdown.textContent.toLowerCase().trim();
            if (selectedText.includes('weekly')) frequency = 'weekly';
            else if (selectedText.includes('monthly')) frequency = 'monthly';
            else if (selectedText.includes('daily')) frequency = 'daily';
        }
        
        // Get payment start date
        const dateInputs = modal.querySelectorAll('input[type="date"]');
        const paymentStartDate = dateInputs[1] ? dateInputs[1].value : new Date().toISOString().split('T')[0];
        
        if (principalAmount <= 0 || loanTermMonths <= 0) {
            showErrorMessage('Please enter valid principal amount and loan term.');
            return;
        }
        
        // Generate schedule locally
        const schedule = generateLocalAmortizationSchedule(principalAmount, loanTermMonths, frequency, paymentStartDate, interestRate);
        
        // Update the table in the DOM
        updateAmortizationTable(schedule);
        
        console.log('Amortization schedule generated locally with frequency:', frequency);
        
    } catch (error) {
        console.error('Error generating amortization table:', error);
        showErrorMessage('Failed to generate amortization schedule. Please try again.');
    }
}

function generateLocalAmortizationSchedule(principal, termMonths, frequency, startDate, interestRate) {
    const schedule = [];
    const monthlyInterestRate = interestRate / 100;
    const totalInterest = principal * monthlyInterestRate * termMonths;
    const totalBalance = principal + totalInterest;
    
    let currentBalance = totalBalance;
    const startDateObj = new Date(startDate);
    
    // Calculate number of payments and payment amount based on frequency
    const frequencyMultiplier = getFrequencyMultiplier(frequency);
    const totalPayments = termMonths * frequencyMultiplier;
    const paymentAmount = totalBalance / totalPayments;
    const daysBetweenPayments = getDaysBetweenPayments(frequency);
    
    // Calculate proportional principal and interest per payment
    const principalPerPayment = principal / totalPayments;
    const interestPerPayment = totalInterest / totalPayments;
    
    console.log('Schedule generation params:', {
        frequency,
        frequencyMultiplier,
        totalPayments,
        paymentAmount: paymentAmount.toFixed(2),
        daysBetweenPayments,
        principalPerPayment: principalPerPayment.toFixed(2),
        interestPerPayment: interestPerPayment.toFixed(2)
    });
    
    for (let i = 1; i <= totalPayments; i++) {
        const paymentDate = new Date(startDateObj);
        paymentDate.setDate(paymentDate.getDate() + (i - 1) * daysBetweenPayments);
        
        currentBalance -= paymentAmount;
        if (currentBalance < 0) currentBalance = 0;
        
        schedule.push({
            no: i,
            remittanceDate: paymentDate.toLocaleDateString(),
            amortization: paymentAmount.toFixed(2),
            principal: principalPerPayment.toFixed(2),
            interest: interestPerPayment.toFixed(2),
            amortPaid: 'N',
            balance: currentBalance.toFixed(2)
        });
    }
    
    return schedule;
}

function updateAmortizationTable(tableData) {
    const tableBody = document.querySelector('#dataTable tbody');
    if (!tableBody) return;
    
    // Clear existing rows
    tableBody.innerHTML = '';
    
    // Add new rows
    tableData.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${row.no}</td>
            <td>${row.remittanceDate || ''}</td>
            <td>${row.amortization ? '₱' + row.amortization : ''}</td>
            <td>${row.principal ? '₱' + row.principal : ''}</td>
            <td>${row.interest ? '₱' + row.interest : ''}</td>
            <td>${row.amortPaid ? 
                `<select class="form-select form-select-sm" onchange="updatePaymentStatus(this, ${row.no})">
                    <option value="N" ${row.amortPaid === 'N' ? 'selected' : ''}>N</option>
                    <option value="Y" ${row.amortPaid === 'Y' ? 'selected' : ''}>Y</option>
                </select>` : ''
            }</td>
            <td>${row.balance ? '₱' + row.balance : ''}</td>
        `;
        tableBody.appendChild(tr);
    });
    
    // Update pagination info
    const infoElement = document.querySelector('#dataTable_info');
    if (infoElement) {
        infoElement.textContent = `Showing 1 to ${tableData.length} of ${tableData.length}`;
    }
}

async function updatePaymentStatus(selectElement, paymentNo) {
    try {
        const status = selectElement.value;
        console.log(`Payment ${paymentNo} status updated to: ${status}`);
    } catch (error) {
        console.error('Error updating payment status:', error);
        selectElement.value = selectElement.value === 'Y' ? 'N' : 'Y';
    }
}

// Utility functions for user feedback
function showErrorMessage(message) {
    alert('Error: ' + message);
}

function showLoadingMessage(message) {
    console.log('Loading: ' + message);
}

function hideLoadingMessage() {
    console.log('Loading complete');
}

// Event listeners
document.addEventListener('DOMContentLoaded', function() {
    const modal = document.querySelector('#modal-1');
    if (modal) {
        // Debounce function to avoid too many calculations
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        const debouncedAutoCalculate = debounce(autoCalculateLoanValues, 300);
        
        // Add event listeners to all relevant input fields for auto-calculation
        const principalInput = modal.querySelector('input[name="principalAmount"]');
        const loanTermInput = modal.querySelector('input[name="loanTerm"]') || modal.querySelector('input[min="1"][max="12"]');
        
        // Principal amount input - triggers auto-calculation
        if (principalInput) {
            principalInput.addEventListener('input', debouncedAutoCalculate);
            principalInput.addEventListener('change', autoCalculateLoanValues);
        }
        
        // Loan term input - triggers auto-calculation
        if (loanTermInput) {
            loanTermInput.addEventListener('input', debouncedAutoCalculate);
            loanTermInput.addEventListener('change', autoCalculateLoanValues);
        }
        
        // Handle dropdown selection for both interest rate and frequency - triggers auto-calculation
        const dropdownItems = modal.querySelectorAll('.dropdown-item');
        console.log('Found dropdown items:', dropdownItems.length);
        
        dropdownItems.forEach((item, index) => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('Dropdown item clicked:', this.textContent);
                
                const dropdownButton = this.closest('.dropdown').querySelector('.dropdown-toggle');
                if (dropdownButton) {
                    dropdownButton.textContent = this.textContent.trim() + ' ';
                    console.log('Updated dropdown button to:', this.textContent.trim());
                }
                
                // Hide dropdown
                const dropdownMenu = this.closest('.dropdown-menu');
                if (dropdownMenu) {
                    dropdownMenu.classList.remove('show');
                }
                
                const dropdown = this.closest('.dropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
                
                // Trigger auto-calculation after dropdown change
                setTimeout(() => {
                    autoCalculateLoanValues();
                }, 100);
            });
        });
        
        // Generate Table button - only generates table when clicked
        const generateButton = modal.querySelector('button[data-bs-target="#modal-2"]');
        if (generateButton) {
            generateButton.addEventListener('click', function(e) {
                e.preventDefault();
                if (checkAllFieldsFilled()) {
                    generateAmortizationTable();
                } else {
                    showErrorMessage('Please fill all fields (Principal Amount, Date Released, Loan Term, Frequency of Collection, and Payment Start Date) before generating the table.');
                }
            });
        }
        
        // Initial calculation check when modal loads
        setTimeout(() => {
            autoCalculateLoanValues();
        }, 500);
    }
});
</script>

</body>

</html>